<div class="chart-container-wrapper" *ngIf="!loadingWorkordersFailed">
  <!-- spinner -->
  <div *ngIf="loading" class="chart-container">
    <div class="bootstrap-spinner-container-wrapper">
      <div class="bootstrap-spinner-container">
        <div class="bootstrap-spinner">
          <div
            #loadingSpinner
            class="spinner-border"
            style="width: 2rem; height: 2rem"
            role="status"
          ></div>
          <span class="loading-tag"><strong>Plotting Chart...</strong></span>
        </div>
      </div>
    </div>
  </div>

  <!-- canvas objects -->
  <!-- five sections one month -->
  <app-sections-per-month
    *ngIf="showSectionsPerMonthChart"
    class="chart-container"
    [workorders]="workorders"
    [sections]="sections"
    [month]="month"
    (chartPlotted)="updateChartPlotted($event)"
    (switchChart)="switchChart($event)"
  >
  </app-sections-per-month>

  <!-- four month comparison -->
  <app-four-months-period
    *ngIf="showFourMonthsPeriodChart"
    class="chart-container"
    [workorders]="workorders"
    [section]="section"
    (chartPlotted)="updateChartPlotted($event)"
    (switchChart)="switchChart($event)"
  ></app-four-months-period>

  <!-- one month broken down to its weeks -->
  <app-one-month-period
    *ngIf="showOneMonthPeriodChart"
    class="chart-container"
    [month]="month"
    [section]="section"
    [workorders]="workorders"
    (switchChart)="switchChart($event)"
  ></app-one-month-period>

  <!-- filter fields -->
  <div *ngIf="chartPlotted" class="filter-charts">
    <div class="filter-charts-label" *ngIf="chartPlotted">Filter Charts</div>

    <!-- filter sections -->
    <div class="filter-chart-field" *ngIf="showFourMonthsPeriodChart || showOneMonthPeriodChart">
      <mat-form-field class="filter-chart-form-field" appearance="outline">
        <mat-label>Select Section</mat-label>
        <mat-select
          #sectionsFilterField
          (selectionChange)="updateSectionToDisplay(sectionsFilterField.value)"
        >
          <mat-option
            *ngFor="let section of factorySections"
            value="{{ section }}"
            >{{ section }}</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>

    <!-- filter months -->
    <div *ngIf="showOneMonthPeriodChart || showSectionsPerMonthChart" class="filter-chart-field">
      <mat-form-field class="filter-chart-form-field" appearance="outline">
        <mat-label>Select Month</mat-label>
        <mat-select
          #monthsFilterField
          (selectionChange)="updateMonthToDisplay(monthsFilterField.value)"
        >
          <mat-option
            *ngFor="let month of months"
            value="{{ month.formatted }}"
            >{{ month.name }}</mat-option
          >
        </mat-select>
      </mat-form-field>
    </div>
  </div>
</div>

<!-- could not load workorders -->
<div *ngIf="loadingWorkordersFailed" class="chart-container">
  {{ indexingError ? indexingError : otherError ? otherError : fallbackError }}
</div>
